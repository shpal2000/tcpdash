##############################steps to build##############################
cd /srcdir
git config --global user.email shpal2000@gmail.com
git clone https://github.com/shpal2000/tcpdash.git
cd /srcdir/tcpdash/ev_sock/
meson build
cd build
ninja install
cd ../../tlspack/
mkdir subprojects
cd subprojects/
git clone https://github.com/nlohmann/json.git
cd ..
meson build
cd build
ninja

cd /srcdir/tcpdash/tcp_proxy
mkdir subprojects
cd subprojects/
git clone https://github.com/nlohmann/json.git
cd ..
meson build
cd build
ninja


##############################copy to imgdir##############################
cp -f /openssl-1.1.1d/libcrypto.so.1.1 /srcdir/imgdir
cp -f /openssl-1.1.1d/libssl.so.1.1 /srcdir/imgdir
cp -f /openssl-1.1.1d/apps/openssl /srcdir/imgdir
cp -f /srcdir/tcpdash/tlspack/build/tlspack.exe /srcdir/imgdir
cp -f /srcdir/tcpdash/tcp_proxy/build/tcp_proxy.exe /srcdir/imgdir
cp -f /srcdir/tcpdash/target_container/Dockerfile /srcdir/imgdir
cp -f /srcdir/tcpdash/tcpdash.conf /srcdir/imgdir
cp -f /srcdir/tcpdash/target_container/Dockerfile /srcdir/imgdir

#####on dev laptop####
ssh shirish@shirish-u18.eastus.cloudapp.azure.com
cd tgen/srcdir/imgdir/
sudo docker image build --tag tgen:latest .
sudo docker image ls
sudo docker tag 42f0ffb4a2da tlspack/tgen:latest
sudo docker push tlspack/tgen

